# 4D ray tracing

## Краткое описание

Сделал рейтрейсинг в четырёхмерном пространстве, используя C++ (библиотеку SFML) и GLSL (фрагментный шейдер).

Самое трудное было – запрогать получение случайно направленного вектора в четырёхмерном пространстве.
Это нужно для матовых поверхностей. Они отражают лучи в случайную сторону. Мой способ основан на генерации случайной
доли объёма гиперсферы и вычислении по нему четвёртой координаты. При этом получается распределение с нужной
плотностью вероятности. Но вычислять приходится обратную функцию (методом Ньютона), так как выразить в элементарных
функциях получается лишь объём через координату.

Пока я не видел аналогов моей программы. Только тут я смог увидеть в двумерном сечении трёхмерного зеркала трёхмерное
сечение четырёхмерного отражения гиперпространства. )

Сейчас в программе можно относительно легко добавлять на сцену гиперсферы и пространства, а также менять цвет и яркость фона.
Все объекты обладают такими свойствами, как степень светимости и зеркальности.
То есть объекты могут быть светящимися, матовыми или зеркальными в той или иной степени.
Настраивается это всё непосредственно в коде шейдера (файл shader.frag). Там есть массив гиперсфер и пространств.

Разрешение экрана и размер пикселей можно менять в первых двух строках кода файла main.cpp.
Параметры управления – в файле controls.cpp.

Перемещение в текущем сечении при помощи клавиш W, S, D, A, Shift и Space, а также в четвёртое измерение клавишами E и Q.
Камера в текущем сечении (относительн плоскостей верх-w и право-w) вращается при помощи мышки. Колёсиком её можно повернуть
относительно плоскости верх-право. Это можно понимать, как поворот текущего сечения в четырёхмерном пространстве. 
Для освобождения курсора используется клавиша Esc.

Постарался минимально говнокодить. Но до этого я на C++ не прогал. Лишь на C.
Управление и базовый скелет приложения разбит на три файла. А вот шейдер весь в одном файле. Как сделать иначе, не знаю.

Кодил я в среде CLion с использованием компилятора MinGW. Соответственно, сборкой занимался CMake.

## Немного скриншотов

### Несколько шариков.

![](/screenshots/screen1.png)

### Два зеркала друг напротив друга.

![](/screenshots/screen2.png)

### Отражение того, чего нет в нашем сечении.

![](/screenshots/screen3.png)